!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).AriakitUtils={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=r(t),u=n(t);function i(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}const c="undefined"!=typeof window&&!(null==(s=window.document)||!s.createElement);var s;function f(e){return e?e.ownerDocument||e:document}function a(e,t){void 0===t&&(t=!1);const{activeElement:n}=f(e);if(null==n||!n.nodeName)return null;if(d(n)&&n.contentDocument)return a(n.contentDocument.body,t);if(t){const e=n.getAttribute("aria-activedescendant");if(e){const t=f(n).getElementById(e);if(t)return t}}return n}function l(e,t){return e===t||e.contains(t)}function d(e){return"IFRAME"===e.tagName}const b=["button","color","file","image","reset","submit"];function m(e,t){return"matches"in e?e.matches(t):"msMatchesSelector"in e?e.msMatchesSelector(t):e.webkitMatchesSelector(t)}function p(e){const t=e;return t.offsetWidth>0||t.offsetHeight>0||e.getClientRects().length>0}function v(e,t){if("closest"in e)return e.closest(t);do{if(m(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}function g(e){try{const t=e instanceof HTMLInputElement&&null!==e.selectionStart,n="TEXTAREA"===e.tagName;return t||n||!1}catch(e){return!1}}function y(e,t){const n=null==e?void 0:e.getAttribute("role");return n&&-1!==["dialog","menu","listbox","tree","grid"].indexOf(n)?n:t}function h(e){if(!e)return null;if(e.clientHeight&&e.scrollHeight>e.clientHeight){const{overflowY:t}=getComputedStyle(e);if("visible"!==t&&"hidden"!==t)return e}return h(e.parentElement)||document.scrollingElement||document.body}function E(e){const t=e.getBoundingClientRect(),n=h(e);if(!n)return!1;const r=n.getBoundingClientRect(),o="HTML"===n.tagName,u=o?r.top+n.scrollTop:r.top,i=o?n.clientHeight:r.bottom,c=o?r.left+n.scrollLeft:r.left,s=o?n.clientWidth:r.right,f=t.top<u,a=t.left<c,l=t.bottom>i,d=t.right>s;return f||a||l||d}function w(){return c&&!!navigator.maxTouchPoints}function S(){return!!c&&/mac|iphone|ipad|ipod/i.test(navigator.platform)}function x(e,t,n,r){void 0===r&&(r=window);try{r.document.addEventListener(e,t,n)}catch(e){}const o=[];for(let i=0;i<(null==(u=r.frames)?void 0:u.length);i+=1){var u;const c=r.frames[i];c&&o.push(x(e,t,n,c))}return()=>{try{r.document.removeEventListener(e,t,n)}catch(e){}o.forEach((e=>e()))}}const A="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function O(e){return m(e,A)&&p(e)}function T(e){return O(e)&&!function(e){return parseInt(e.getAttribute("tabindex")||"0",10)<0}(e)}function F(e,t){const n=Array.from(e.querySelectorAll(A));t&&n.unshift(e);const r=n.filter(O);return r.forEach(((e,t)=>{if(d(e)&&e.contentDocument){const n=e.contentDocument.body;r.splice(t,1,...F(n))}})),r}function I(e,t){const[n]=F(e,t);return n||null}function j(e,t,n){const r=Array.from(e.querySelectorAll(A)),o=r.filter(T);return t&&T(e)&&o.unshift(e),o.forEach(((e,t)=>{if(d(e)&&e.contentDocument){const r=j(e.contentDocument.body,!1,n);o.splice(t,1,...r)}})),!o.length&&n?r:o}function C(e,t,n){const[r]=j(e,t,n);return r||null}function P(e,t,n){const r=j(e,t,n);return r[r.length-1]||null}function R(e,t,n,r){const o=a(e),u=F(e,t),i=u.indexOf(o),c=u.slice(i+1);return c.find(T)||(n?u.find(T):null)||(r?c[0]:null)||null}function N(e,t,n,r){const o=a(e),u=F(e,t).reverse(),i=u.indexOf(o),c=u.slice(i+1);return c.find(T)||(n?u.find(T):null)||(r?c[0]:null)||null}function k(e){const t=a(e);if(!t)return!1;if(l(e,t))return!0;const n=t.getAttribute("aria-activedescendant");return!!n&&("id"in e&&(n===e.id||!!e.querySelector("#"+CSS.escape(n))))}function L(e){var t;const n=null!=(t=e.getAttribute("tabindex"))?t:"";e.setAttribute("data-tabindex",n),e.setAttribute("tabindex","-1")}function M(e,t){if(e===t)return!0;if(!e)return!1;if(!t)return!1;if("object"!=typeof e)return!1;if("object"!=typeof t)return!1;const n=Object.keys(e),r=Object.keys(t),{length:o}=n;if(r.length!==o)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function D(e,t){if(function(e){return"function"==typeof e}(e)){return e(function(e){return"function"==typeof e}(t)?t():t)}return e}function _(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function V(e){return"object"==typeof e&&null!=e}function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const B=o.useId,H=o.useDeferredValue,U=o.useInsertionEffect,W=c?t.useLayoutEffect:t.useEffect;function K(e){const[n]=t.useState(e);return n}function Y(e){const n=t.useRef();return void 0===n.current&&(n.current=e()),n.current}function z(e){const n=t.useRef(e);return W((()=>{n.current=e})),n}function X(e){const n=t.useRef((()=>{throw new Error("Cannot call an event handler while rendering.")}));return U?U((()=>{n.current=e})):n.current=e,t.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)}),[])}function $(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useMemo((()=>{if(n.some(Boolean))return e=>{n.forEach((t=>{_(t,e)}))}}),n)}function G(e){if("string"==typeof e)return e}const J=Symbol("setNextState");function Q(e){return!0===e[J]}function Z(e,n,r){void 0===r&&(r=[]);const o=t.useCallback((t=>(e.wrapElement&&(t=e.wrapElement(t)),n(t))),[...r,e.wrapElement]);return{...e,wrapElement:o}}let ee=!1,te=0,ne=0;function re(e){(function(e){const t=e.movementX||e.screenX-te,n=e.movementY||e.screenY-ne;return te=e.screenX,ne=e.screenY,t||n||!1})(e)&&(ee=!0)}function oe(){ee=!1}var ue,ie={exports:{}},ce={};function se(e){const n=(t,n)=>e({ref:n,...t});return t.forwardRef(n)}!function(e){e.exports=function(){if(ue)return ce;ue=1;var e=u.default,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,u){var c,s={},f=null,a=null;for(c in void 0!==u&&(f=""+u),void 0!==n.key&&(f=""+n.key),void 0!==n.ref&&(a=n.ref),n)r.call(n,c)&&!i.hasOwnProperty(c)&&(s[c]=n[c]);if(e&&e.defaultProps)for(c in n=e.defaultProps)void 0===s[c]&&(s[c]=n[c]);return{$$typeof:t,type:e,key:f,ref:a,props:s,_owner:o.current}}return ce.Fragment=n,ce.jsx=c,ce.jsxs=c,ce}()}(ie);const fe=Symbol("getState"),ae=Symbol("subscribe"),le=Symbol("timestamp"),de=Symbol("initialContext");function be(e){return!!e&&!!e[ae]}function me(e,t){void 0===t&&(t=e),Object.defineProperty(e,fe,{value:()=>t,writable:!0})}function pe(e){return e&&de in e}function ve(e){if(!pe(e))return;return e[de]}const ge=t.createContext(void 0);e.addGlobalEventListener=x,e.addItemToArray=function(e,t,n){return void 0===n&&(n=-1),n in e?[...e.slice(0,n),t,...e.slice(n)]:[...e,t]},e.applyState=D,e.canUseDOM=c,e.chain=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(const e of t)"function"==typeof e&&e(...arguments)}},e.closest=v,e.contains=l,e.createComponent=se,e.createElement=function(e,t){const{as:n,wrapElement:r,...o}=t;let u;if(n&&"string"!=typeof n)u=ie.exports.jsx(n,{...o});else if("function"==typeof t.children){const{children:e,...n}=o;u=t.children(n)}else u=n?ie.exports.jsx(n,{...o}):ie.exports.jsx(e,{...o});return r?r(u):u},e.createHook=function(e){return function(t){void 0===t&&(t={});const n=e(t),r={};for(const e in n)q(n,e)&&void 0!==n[e]&&(r[e]=n[e]);return r}},e.createMemoComponent=function(e,n){void 0===n&&(n=M);const r=se(e);return t.memo(r,((e,t)=>{const{state:r,...o}=e,{state:u,...i}=t;return u&&be(u)?n(o,i):n(e,t)}))},e.createStoreContext=function(){const e=t.createContext(void 0);return function(e){const n=t.createContext(void 0);Object.defineProperty(e,de,{value:n})}(e),e},e.cx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")||void 0},e.disableFocus=L,e.disableFocusIn=function(e,t){j(e,t).forEach(L)},e.fireBlurEvent=function(e,t){const n=new FocusEvent("blur",t),r=e.dispatchEvent(n),o={...t,bubbles:!0};return e.dispatchEvent(new FocusEvent("focusout",o)),r},e.fireClickEvent=function(e,t){const n=new MouseEvent("click",t);return e.dispatchEvent(n)},e.fireEvent=function(e,t,n){const r=new Event(t,n);return e.dispatchEvent(r)},e.fireFocusEvent=function(e,t){const n=new FocusEvent("focus",t),r=e.dispatchEvent(n),o={...t,bubbles:!0};return e.dispatchEvent(new FocusEvent("focusin",o)),r},e.fireKeyboardEvent=function(e,t,n){const r=new KeyboardEvent(t,n);return e.dispatchEvent(r)},e.flatten2DArray=function(e){const t=[];for(const n of e)t.push(...n);return t},e.focusIfNeeded=function(e){!k(e)&&O(e)&&e.focus()},e.focusIntoView=function(e,t){"scrollIntoView"in e?(e.focus({preventScroll:!0}),e.scrollIntoView({block:"nearest",inline:"nearest",...t})):e.focus()},e.getActiveElement=a,e.getAllFocusable=function(e){return F(document.body,e)},e.getAllFocusableIn=F,e.getAllTabbable=function(e){return j(document.body,!1,e)},e.getAllTabbableIn=j,e.getClosestFocusable=function(e){for(;e&&!O(e);)e=v(e,A);return e||null},e.getDocument=f,e.getFirstFocusable=function(e){return I(document.body,e)},e.getFirstFocusableIn=I,e.getFirstTabbable=function(e){return C(document.body,!1,e)},e.getFirstTabbableIn=C,e.getLastTabbable=function(e){return P(document.body,!1,e)},e.getLastTabbableIn=P,e.getNextTabbable=function(e,t){return R(document.body,!1,e,t)},e.getNextTabbableIn=R,e.getPopupItemRole=function(e,t){var n;const r=y(e);return r&&null!=(n={menu:"menuitem",listbox:"option",tree:"treeitem",grid:"gridcell"}[r])?n:t},e.getPopupRole=y,e.getPreviousTabbable=function(e,t){return N(document.body,!1,e,t)},e.getPreviousTabbableIn=N,e.getScrollingElement=h,e.getTextboxSelection=function(e){let t=0,n=0;if(g(e))t=e.selectionStart||0,n=e.selectionEnd||0;else if(e.isContentEditable){const r=f(e).getSelection();if(null!=r&&r.rangeCount&&r.anchorNode&&l(e,r.anchorNode)&&r.focusNode&&l(e,r.focusNode)){const o=r.getRangeAt(0),u=o.cloneRange();u.selectNodeContents(e),u.setEnd(o.startContainer,o.startOffset),t=u.toString().length,u.setEnd(o.endContainer,o.endOffset),n=u.toString().length}}return{start:t,end:n}},e.getWindow=function(e){return f(e).defaultView||window},e.hasFocus=function(e){const t=a(e);if(!t)return!1;if(t===e)return!0;const n=t.getAttribute("aria-activedescendant");return!!n&&n===e.id},e.hasFocusWithin=k,e.hasOwnProperty=q,e.isApple=S,e.isButton=function(e){const t=e.tagName.toLowerCase();return"button"===t||!("input"!==t||!e.type)&&-1!==b.indexOf(e.type)},e.isDownloading=function(e){const t=e.currentTarget;if(!t)return!1;const n=t.tagName.toLowerCase();return!!e.altKey&&("a"===n||("button"===n&&"submit"===t.type||"input"===n&&"submit"===t.type))},e.isEmpty=function(e){return Array.isArray(e)?!e.length:V(e)?!Object.keys(e).length:null==e||""===e},e.isFirefox=function(){return c&&/firefox\//i.test(navigator.userAgent)},e.isFocusEventOutside=function(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!l(n,r)},e.isFocusable=O,e.isFrame=d,e.isInteger=function(e){return"number"==typeof e?Math.floor(e)===e:String(Math.floor(Number(e)))===e},e.isMac=function(){return c&&navigator.platform.startsWith("Mac")&&!w()},e.isObject=V,e.isOpeningInNewTab=function(e){const t=e.currentTarget;if(!t)return!1;const n=S();if(n&&!e.metaKey)return!1;if(!n&&!e.ctrlKey)return!1;const r=t.tagName.toLowerCase();return"a"===r||("button"===r&&"submit"===t.type||"input"===r&&"submit"===t.type)},e.isPartiallyHidden=E,e.isPortalEvent=function(e){return!l(e.currentTarget,e.target)},e.isPromise=function(e){return Boolean(e&&"then"in e&&"function"==typeof e.then)},e.isSafari=function(){return c&&S()&&/apple/i.test(navigator.vendor)},e.isSelfTarget=function(e){return e.target===e.currentTarget},e.isTabbable=T,e.isTextField=g,e.isTouchDevice=w,e.isVisible=p,e.matches=m,e.noop=function(){},e.normalizeString=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},e.queueBeforeEvent=function(e,t,n){const r=requestAnimationFrame((()=>{e.removeEventListener(t,o,!0),n()})),o=()=>{cancelAnimationFrame(r),n()};return e.addEventListener(t,o,{once:!0,capture:!0}),r},e.queueMicrotask=function(e){if(window.queueMicrotask)return window.queueMicrotask(e);Promise.resolve().then(e)},e.restoreFocusIn=function(e){const t=e.querySelectorAll("[data-tabindex]"),n=e=>{const t=e.getAttribute("data-tabindex");e.removeAttribute("data-tabindex"),t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")};e.hasAttribute("data-tabindex")&&n(e),t.forEach(n)},e.reverseArray=function(e){return e.slice().reverse()},e.scrollIntoViewIfNeeded=function(e,t){E(e)&&"scrollIntoView"in e&&e.scrollIntoView(t)},e.setRef=_,e.shallowEqual=M,e.toArray=i,e.useBooleanEvent=function(e){return X("function"==typeof e?e:()=>e)},e.useControlledState=function(e,n,r){const[o,u]=t.useState(e),i=void 0!==n?n:o,c=z(n),s=z(r),f=z(i),a=t.useCallback((e=>{const t=s.current;if(t)if(Q(t))t(e);else{const n=D(e,f.current);f.current=n,t(n)}void 0===c.current&&u(e)}),[]);var l;return Q(l=a)||Object.defineProperty(l,J,{value:!0}),[i,a]},e.useDeferredValue=function(e){if(H)return H(e);const[n,r]=t.useState(e);return t.useEffect((()=>{const t=requestAnimationFrame((()=>r(e)));return()=>cancelAnimationFrame(t)}),[e]),n},e.useEvent=X,e.useForceUpdate=function(){return t.useReducer((()=>[]),[])},e.useForkRef=$,e.useId=function(e){if(B){const t=B();return e||t}const[n,r]=t.useState(e);return W((()=>{if(e||n)return;const t=Math.random().toString(36).substr(2,6);r("id-"+t)}),[e,n]),e||n},e.useInitialValue=K,e.useIsMouseMoving=function(){return t.useEffect((()=>{x("mousemove",re,!0),x("mousedown",oe,!0),x("mouseup",oe,!0),x("keydown",oe,!0),x("scroll",oe,!0)}),[]),X((()=>ee))},e.useLazyValue=Y,e.useLiveRef=z,e.usePortalRef=function(e,n){void 0===e&&(e=!1);const[r,o]=t.useState(null);return{portalRef:$(o,n),portalNode:r,domReady:!e||r}},e.usePreviousValue=function(e){const[n,r]=t.useState(e);return e!==n&&r(e),n},e.useRefId=function(e,n){const[r,o]=t.useState(void 0);return W((()=>{var t;o(null==e||null==(t=e.current)?void 0:t.id)}),n),r},e.useSafeLayoutEffect=W,e.useStore=function(e,n){const r=t.useContext(function(e,t){if(!pe(e))return ge;if(t)return ve(e);return e}(e,n)),o=pe(e)?r:e,[u,c]=t.useState((()=>function(e){if(!e)return e;const t=e[fe];return t?t():e}(o))),s=be(o)&&be(u)?(f=u,(a=o)?f?le in a?le in f&&f[le]>=a[le]?f:a:f:a:f):o;var f,a;const l=function(e){if(e)return e[ae]}(o),d=t.useRef(null),b=i(n),m=!n;return W((()=>{if(l&&c){if(m)return l(c);if(b.length)return l((e=>{const t=d.current;d.current=e;b.some((n=>{if("function"==typeof n){const r=n(e);return"boolean"==typeof r?r||t&&n(t):t?r!==n(t):r}const r=n;return(null==t?void 0:t[r])!==e[r]}))&&c(e)}))}}),[l,c,m,...b]),s},e.useStoreProvider=function(e,t){let{state:n,...r}=e;const o=K(n),u=n&&be(n)?o:n;me(u,n);const i=ve(t);return Z(r,(e=>(u&&i&&(e=ie.exports.jsx(i.Provider,{value:u,children:e})),n&&(e=ie.exports.jsx(t.Provider,{value:n,children:e})),e)),[u,i,n,t])},e.useStorePublisher=function(e){const n=Y((()=>new Set));W((()=>{!function(e){Object.defineProperty(e,le,{value:Date.now(),writable:!0})}(e);for(const t of n)t(e)}),[e]);const r=t.useCallback((e=>(n.add(e),()=>n.delete(e))),[]);return function(e,t){ae in e||Object.defineProperty(e,ae,{value:t})}(e,r),me(e),function(e){le in e||Object.defineProperty(e,le,{value:Date.now(),writable:!0})}(e),e},e.useTagName=function(e,n){const[r,o]=t.useState((()=>G(n)));return W((()=>{var t;o((null==e||null==(t=e.current)?void 0:t.tagName.toLowerCase())||G(n))}),[e,n]),r},e.useUpdateEffect=function(e,n){const r=t.useRef(!1);t.useEffect((()=>{if(r.current)return e();r.current=!0}),n),t.useEffect((()=>()=>{r.current=!1}),[])},e.useUpdateLayoutEffect=function(e,n){const r=t.useRef(!1);W((()=>{if(r.current)return e();r.current=!0}),n),W((()=>()=>{r.current=!1}),[])},e.useWrapElement=Z,Object.defineProperty(e,"__esModule",{value:!0})}));
