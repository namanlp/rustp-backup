!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("styled-components"),require("@xstyled/util"),require("react"),require("@xstyled/system")):"function"==typeof define&&define.amd?define(["exports","styled-components","@xstyled/util","react","@xstyled/system"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xstyled={},e.styled,e.util,e.React,e.xstyledSystem)}(this,(function(e,t,r,n,o){"use strict";function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=u(t),l=u(n);function a(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e){return o.getBreakpoints({theme:e})}function f(){var e=l.default.useState("undefined"==typeof window?null:window.innerWidth),t=e[0],r=e[1];return l.default.useEffect((function(){function e(){r(window.innerWidth)}return window.addEventListener("resize",e),r(window.innerWidth),function(){return window.removeEventListener("resize",e)}}),[]),t}function s(e,t){var r=function(e,t){var r=c(e)[t];return 0===r?null:r}(e,t);return f()>=r}function m(e,t){var r=function(e,t){var r=c(e)[t];return 0===r?null:r-.02}(e,t);return f()<r}function g(){return["&&{",o.system,"}"]}g.meta=o.system.meta;var h=function(e){return function(t){var r=Number(t);return e(Number.isNaN(r)?t:r)}},v=/\s+/,y=function(e){return function(t){var r=t.split(v);return function(t){return r.map((function(r){return e(r)(t)})).join(" ")}}},p=/\s*,\s*/,b=function(e){return function(t){var r=t.split(p);return function(t){return r.map((function(r){return e(r)(t)})).join(",")}}},w=h(o.getPx),S=h(o.getSpace),C=y(S),x=h(o.getBorder),j=h(o.getBorderWidth),M=y(j),P=h(o.getSize),T=y(o.getBorderStyle),O={margin:C,"margin-top":S,"margin-bottom":S,"margin-left":S,"margin-right":S,padding:C,"padding-top":S,"padding-bottom":S,"padding-left":S,"padding-right":S,"grid-gap":C,"grid-row-gap":S,"grid-column-gap":S,color:o.getColor,"background-color":o.getColor,"border-color":o.getColor,"border-top-color":o.getColor,"border-right-color":o.getColor,"border-bottom-color":o.getColor,"border-left-color":o.getColor,"outline-color":o.getColor,fill:o.getColor,"border-radius":y(h(o.getRadius)),"border-top-left-radius":y(h(o.getRadius)),"border-top-right-radius":y(h(o.getRadius)),"border-bottom-right-radius":y(h(o.getRadius)),"border-bottom-left-radius":y(h(o.getRadius)),border:x,"border-top":x,"border-right":x,"border-bottom":x,"border-left":x,"border-width":M,"border-top-width":j,"border-right-width":j,"border-bottom-width":j,"border-left-width":j,"outline-width":j,"border-style":T,"border-top-style":o.getBorderStyle,"border-right-style":o.getBorderStyle,"border-bottom-style":o.getBorderStyle,"border-left-style":o.getBorderStyle,"outline-style":o.getBorderStyle,"box-shadow":b(o.getShadow),"text-shadow":b(o.getShadow),width:P,height:P,"max-width":P,"max-height":P,"min-width":P,"min-height":P,"z-index":h(o.getZIndex),"font-family":o.getFont,"font-size":h(o.getFontSize),"line-height":h(o.getLineHeight),"font-weight":o.getFontWeight,"letter-spacing":h(o.getLetterSpacing),transition:o.getTransition,top:w,right:w,bottom:w,left:w},E=/(\s*)([^&{}:;\n]+):\s*([^&{}:;\n]+)(\s*);/g,B=/\s*!important\s*/;function k(e){if("string"!=typeof e)return e;for(var t,r=0,n=[],o=function(){var o=t,u=o[1],i=o[2],l=o[3],a=o[4],d=O[i];if(d){var c=B.test(l),f=l.replace(B,"");n.push(e.slice(r,t.index)),n.push((function(e){return""+u+i+": "+d(f)(e)+(c?" !important":"")+";"+a})),r=t.index+t[0].length}};t=E.exec(e);)o();return n.push(e.slice(r,e.length)),n}var L=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(".")},_=function(e){return"--"+e.replace(/\./g,"-")},q=function(e,t){return"var("+_(e)+", "+t+")"};function I(e,t,n){void 0===n&&(n=e);var o=Array.isArray(e)?[]:{};for(var u in e){var i=e[u],l=L(t,u);r.obj(i)?o[u]=I(i,l,n):r.string(i)?o[u]=q(l,i):r.func(i)&&(o[u]=q(l,i({theme:n})))}return o}function R(e,t,n,o){for(var u in void 0===n&&(n=e),void 0===o&&(o={value:""}),e){var i=e[u],l=L(t,u);r.obj(i)?R(i,l,n,o):r.string(i)?o.value+=_(l)+": "+i+";":r.func(i)&&(o.value+=_(l)+": "+i({theme:n})+";")}return o.value}var z="xstyled-color-mode",N="undefined"!=typeof window&&function(){try{var e=z+"-test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}()?{get:function(){return window.localStorage.getItem(z)},set:function(e){return window.localStorage.setItem(z,e)},clear:function(){return window.localStorage.removeItem(z)}}:{get:function(){return null},set:function(){},clear:function(){}},W=function(e){return"xstyled-color-mode-"+e},F="xstyled-colors",A=["light","dark"];var G=function(e){return"(prefers-color-scheme: "+e+")"};function Q(e){return e&&e.colors&&e.colors.modes}function H(e){return e&&(void 0===e.useCustomProperties||e.useCustomProperties)}function D(e){return e.initialColorModeName||"default"}function U(e,t){var r=(void 0===t?{}:t).targetSelector,n=void 0===r?"body":r;if(!Q(e))return null;var o=e.colors,u=o.modes,i=R(a(o,["modes"]),F,e);function l(t){var r=function(e,t){return d({},e,{colors:d({},e.colors,e.colors.modes[t])})}(e,t),n=r.colors,o=n.modes;return R(d({},a(n,["modes"]),o[t]),F,r)}return!1!==e.useColorSchemeMediaQuery&&A.forEach((function(e){if(u[e]){var t="@media "+G(e);i+=t+"{"+l(e)+"}"}})),[D(e)].concat(Object.keys(u)).forEach((function(e){var t="&."+W(e);i+=t+"{"+l(e)+"}"})),n+"{"+i+"}"}function V(e){var t=l.default.useMemo((function(){return function(e){return e&&(void 0===e.useColorSchemeMediaQuery||e.useColorSchemeMediaQuery)}(e)?A.map((function(t){if(!e.colors.modes[t])return null;var r=function(e){if("undefined"==typeof window||void 0===window.matchMedia)return null;var t=G(e);return window.matchMedia(t)}(t);return r?{mode:t,mql:r}:null})).filter(Boolean):[]}),[e]),r=l.default.useState((function(){var e=t.find((function(e){return e.mql.matches}));return e?e.mode:null})),n=r[0],o=r[1];return l.default.useEffect((function(){var e=t.filter((function(e){var t=e.mql;return t.addListener&&t.removeListener})).map((function(e){var t=e.mode,r=e.mql,n=function(e){var r=e.matches;o(r?t:function(e){return e===t?null:t})};return r.addListener(n),function(){return r.removeListener(n)}}));return function(){return e.forEach((function(e){return e()}))}})),n}var Z="undefined"!=typeof window?l.default.useLayoutEffect:l.default.useEffect;function J(e,t){var r=(void 0===t?{}:t).target,n=V(e),o=function(e){return e.defaultColorModeName||D(e)}(e),u=D(e),i=l.default.useState((function(){return Q(e)?o:null})),a=i[0],d=i[1],c=H(e),f=l.default.useRef(!1),s=l.default.useCallback((function(e){f.current=!0,d(e)}),[]);return Z((function(){if(Q(e)){var t=N.get();a!==(t||n||o)&&d(t||n||o)}}),[]),Z((function(){f.current&&N.set(a)}),[a]),Z((function(){if(!N.get()){var e=n||o;e!==a&&d(e)}}),[a,n,o]),Z((function(){if(c&&(N.get()||u!==a)){var e=W(a),t=r||document.body;return t.classList.add(e),function(){t.classList.remove(e)}}}),[c,r,a,u]),[a,s]}var K=l.default.createContext();function X(e){var t=e.ThemeContext,r=e.ThemeProvider,n=e.ColorModeStyle;return function(e){var o=e.children,u=e.target,i=e.targetSelector,c=l.default.useContext(t);if(!c)throw new Error("[ColorModeProvider] requires ThemeProvider upper in the tree");var f=J(c,{target:u}),s=function(e,t){var r=l.default.useMemo((function(){if(!H(e))return null;if(!Q(e))return e;var t=e.colors,r=t.modes,n=a(t,["modes"]);return d({},e,{colors:d({},I(n,F,e),{modes:r}),__rawColors:e.colors})}),[e]),n=l.default.useMemo((function(){return H(e)?null:Q(e)?t===D(e)?d({},e,{__colorMode:t}):d({},e,{colors:d({},e.colors,e.colors.modes[t]),__colorMode:t,__rawColors:e.colors}):e}),[e,t]);return r||n}(c,f[0]);return l.default.createElement(l.default.Fragment,null,l.default.createElement(n,{targetSelector:i}),l.default.createElement(r,{theme:s},l.default.createElement(K.Provider,{value:f},o)))}}function Y(e){var t=(void 0===e?{}:e).target;return"(function() { try {\n    var mode = localStorage.getItem('"+z+"');\n    if (mode) "+(void 0===t?"document.body":t)+".classList.add('"+"xstyled-color-mode-' + mode);\n  } catch (e) {} })();"}function $(){var e=t.css.apply(void 0,arguments),n=r.flattenStrings(e);return n.map(k)}function ee(e,t){return t||(t=e.slice(0)),e.raw=t,e}function te(){var e=ee(["",""]);return te=function(){return e},e}function re(e){return function e(t){var r=function(){return t(te(),$.apply(void 0,arguments))};return r.attrs=function(r){return e(t.attrs(r))},r.withConfig=function(r){return e(t.withConfig(r))},r}(i.default(e))}var ne=re(o.createSystemComponent(l.default))(g);function oe(){var e=ee(["",""]);return oe=function(){return e},e}re.box=re(ne),Object.keys(i.default).forEach((function(e){re[e]=re(e),re[e+"Box"]=re(ne.withComponent(o.createSystemComponent(l.default,e)))}));var ue=t.createGlobalStyle(oe(),(function(e){return U(e.theme,{targetSelector:e.targetSelector})})),ie=X({ThemeContext:t.ThemeContext,ThemeProvider:t.ThemeProvider,ColorModeStyle:ue});function le(){return l.default.useContext(t.ThemeContext)}Object.keys(o).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})})),Object.defineProperty(e,"ServerStyleSheet",{enumerable:!0,get:function(){return t.ServerStyleSheet}}),Object.defineProperty(e,"StyleSheetConsumer",{enumerable:!0,get:function(){return t.StyleSheetConsumer}}),Object.defineProperty(e,"StyleSheetContext",{enumerable:!0,get:function(){return t.StyleSheetContext}}),Object.defineProperty(e,"StyleSheetManager",{enumerable:!0,get:function(){return t.StyleSheetManager}}),Object.defineProperty(e,"ThemeConsumer",{enumerable:!0,get:function(){return t.ThemeConsumer}}),Object.defineProperty(e,"ThemeContext",{enumerable:!0,get:function(){return t.ThemeContext}}),Object.defineProperty(e,"ThemeProvider",{enumerable:!0,get:function(){return t.ThemeProvider}}),Object.defineProperty(e,"isStyledComponent",{enumerable:!0,get:function(){return t.isStyledComponent}}),Object.defineProperty(e,"keyframes",{enumerable:!0,get:function(){return t.keyframes}}),Object.defineProperty(e,"withTheme",{enumerable:!0,get:function(){return t.withTheme}}),e.Box=ne,e.ColorModeProvider=ie,e.createGlobalStyle=function(){return t.createGlobalStyle([$.apply(void 0,arguments)])},e.css=$,e.default=re,e.getColorModeInitScriptElement=function(e){return l.default.createElement("script",{key:"xstyled-color-mode-init",dangerouslySetInnerHTML:{__html:Y(e)}})},e.getColorModeInitScriptTag=function(e){return"<script>"+Y(e)+"<\/script>"},e.useBreakpoint=function(){return e=le(),t=c(e),r=f(),l.default.useMemo((function(){return Object.keys(t).reverse().find((function(e){return r>t[e]}))||null}),[t,r]);var e,t,r},e.useBreakpoints=function(){return c(le())},e.useColorMode=function(){var e=l.default.useContext(K);if(!e)throw new Error("[useColorMode] requires the ColorModeProvider component");return e},e.useDown=function(e){return m(le(),e)},e.useTheme=le,e.useUp=function(e){return s(le(),e)},e.useViewportWidth=f,Object.defineProperty(e,"__esModule",{value:!0})}));
